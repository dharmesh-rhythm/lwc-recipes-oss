<template>
    <div class="app-container slds-grid slds-grid_vertical">
        <!-- App Header -->
        <header class="slds-col app-header slds-p-around_medium">
            <div
                class="slds-grid slds-grid_align-spread slds-grid_vertical-align-center"
            >
                <div>
                    <h1 class="slds-text-heading_large">Salesforce CRM</h1>
                </div>
                <div class="slds-grid slds-grid_align-end">
                    <c-connectivity-status
                        class="slds-m-right_small"
                    ></c-connectivity-status>
                    <span class="slds-badge slds-badge_lightest"
                        >Lightning Web Components OSS</span
                    >
                </div>
            </div>
        </header>

        <!-- Tab Navigation -->
        <div class="slds-tabs_default">
            <ul class="slds-tabs_default__nav" role="tablist">
                <li
                    class={accountsTabClass}
                    title="Accounts"
                    role="presentation"
                >
                    <a
                        class="slds-tabs_default__link"
                        href="javascript:void(0);"
                        role="tab"
                        tabindex={accountsTabIndex}
                        aria-selected={isAccountView}
                        aria-controls="accounts-tab-content"
                        id="accounts-tab"
                        onclick={handleTabSelect}
                    >
                        <span class="slds-tabs__left-icon">
                            <span
                                class="slds-icon_container slds-icon-standard-account"
                            >
                                <svg
                                    class="slds-icon slds-icon_small"
                                    aria-hidden="true"
                                >
                                    <use
                                        xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#account"
                                    ></use>
                                </svg>
                                <span class="slds-assistive-text">Account</span>
                            </span>
                        </span>
                        <span>Accounts</span>
                    </a>
                </li>
                <li
                    class={contactsTabClass}
                    title="Contacts"
                    role="presentation"
                >
                    <a
                        class="slds-tabs_default__link"
                        href="javascript:void(0);"
                        role="tab"
                        tabindex={contactsTabIndex}
                        aria-selected={isContactView}
                        aria-controls="contacts-tab-content"
                        id="contacts-tab"
                        onclick={handleTabSelect}
                    >
                        <span class="slds-tabs__left-icon">
                            <span
                                class="slds-icon_container slds-icon-standard-contact"
                            >
                                <svg
                                    class="slds-icon slds-icon_small"
                                    aria-hidden="true"
                                >
                                    <use
                                        xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#contact"
                                    ></use>
                                </svg>
                                <span class="slds-assistive-text">Contact</span>
                            </span>
                        </span>
                        <span>Contacts</span>
                    </a>
                </li>
            </ul>

            <!-- Account Tab Content -->
            <div
                id="accounts-tab-content"
                class="slds-tabs_default__content"
                role="tabpanel"
                aria-labelledby="accounts-tab"
                hidden={isContactView}
            >
                <div class={contentClass}>
                    <c-account-manager
                        onnewcontact={handleNewContact}
                        oneditcontact={handleEditContact}
                        onviewcontacts={handleViewContacts}
                        oneditsuccess={handleEditSuccess}
                    ></c-account-manager>
                </div>
            </div>

            <!-- Contact Tab Content -->
            <div
                id="contacts-tab-content"
                class="slds-tabs_default__content"
                role="tabpanel"
                aria-labelledby="contacts-tab"
                hidden={isAccountView}
            >
                <div class={contentClass}>
                    <c-contact-manager
                        onviewaccounts={handleViewAccounts}
                        oneditsuccess={handleEditSuccess}
                    ></c-contact-manager>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Service Worker (no UI) -->
    <c-service-worker-registration
        onsyncpendingoperations={handleSyncOperations}
    ></c-service-worker-registration>
</template>
