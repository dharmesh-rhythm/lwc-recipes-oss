<template>
    <div class="detail-container">
        <!-- Sidebar with tabs -->
        <div class="sidebar">
            <div class={detailsStepClass} onclick={handleDetailsTab}>
                <div class="step-icon">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"
                        ></path>
                    </svg>
                </div>
                <div class="step-label">Details</div>
            </div>
            <div class="step-connector"></div>
            <div class={questionsStepClass} onclick={handleQuestionsTab}>
                <div class="step-icon">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"
                        ></path>
                    </svg>
                </div>
                <div class="step-label">Questions</div>
            </div>
            <div class="step-connector"></div>
            <div class={filesStepClass} onclick={handleFilesTab}>
                <div class="step-icon">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"
                        ></path>
                    </svg>
                </div>
                <div class="step-label">Files</div>
            </div>
            <div class="step-connector"></div>
            <div class={previewStepClass} onclick={handlePreviewTab}>
                <div class="step-icon">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-7 7z"
                        ></path>
                    </svg>
                </div>
                <div class="step-label">Preview</div>
            </div>
        </div>

        <!-- Main content area -->
        <div class="main-content">
            <!-- Header with title and actions -->
            <div class="page-header">
                <h1 class="page-title">Define</h1>
                <div class="header-actions">
                    <button
                        class="action-button back-button"
                        onclick={handleBack}
                    >
                        <span>Back</span>
                    </button>
                    <button
                        class="action-button edit-button"
                        onclick={handleEdit}
                    >
                        <span>Edit</span>
                    </button>
                </div>
            </div>

            <!-- Main content -->
            <div class="detail-content">
                <!-- If data is loading or not available -->
                <template if:false={hasDetail}>
                    <div class="loading-container">
                        <div if:true={isLoading} class="loading-spinner">
                            Loading...
                        </div>
                        <div if:false={isLoading} class="no-data">
                            No details available for this checklist.
                        </div>
                    </div>
                </template>

                <!-- If data is available -->
                <template if:true={hasDetail}>
                    <!-- Details Tab Content -->
                    <template if:true={isDetailsTabActive}>
                        <div class="detail-tab-content">
                            <!-- General Information Section with Collapse/Expand -->
                            <div class="information-section">
                                <div
                                    class="section-header"
                                    onclick={toggleInformationSection}
                                >
                                    <div class="section-toggle">
                                        <template
                                            if:true={isInformationExpanded}
                                        >
                                            <svg
                                                class="toggle-icon"
                                                viewBox="0 0 24 24"
                                            >
                                                <path
                                                    d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"
                                                ></path>
                                            </svg>
                                        </template>
                                        <template
                                            if:false={isInformationExpanded}
                                        >
                                            <svg
                                                class="toggle-icon"
                                                viewBox="0 0 24 24"
                                            >
                                                <path
                                                    d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"
                                                ></path>
                                            </svg>
                                        </template>
                                    </div>
                                    <h2 class="section-title">
                                        General Information
                                    </h2>
                                    <div class="section-status">
                                        <span class="status-pill closed"
                                            >Closed</span
                                        >
                                    </div>
                                </div>

                                <div class={informationContentClass}>
                                    <div class="detail-field-row">
                                        <div class="field-group">
                                            <div class="field-label">
                                                Assessment Name
                                            </div>
                                            <div class="field-value">
                                                {_detail.name}
                                            </div>
                                        </div>
                                        <div class="field-group">
                                            <div class="field-label">
                                                Category
                                            </div>
                                            <div class="field-value">
                                                {_detail.category}
                                            </div>
                                        </div>
                                    </div>

                                    <div class="detail-field-row">
                                        <div class="field-group">
                                            <div class="field-label">
                                                Checklist Name
                                            </div>
                                            <div class="field-value">
                                                {_detail.checklist}
                                            </div>
                                        </div>
                                        <div class="field-group">
                                            <div class="field-label">
                                                Occurrence
                                            </div>
                                            <div class="field-value">
                                                {_detail.occurrence}
                                            </div>
                                        </div>
                                    </div>

                                    <div class="detail-field-row">
                                        <div class="field-group">
                                            <div class="field-label">
                                                Start Date
                                            </div>
                                            <div class="field-value">
                                                {_detail.startDate}
                                            </div>
                                        </div>
                                        <div class="field-group">
                                            <div class="field-label">
                                                End Date
                                            </div>
                                            <div class="field-value">
                                                {_detail.endDate}
                                            </div>
                                        </div>
                                    </div>

                                    <div class="detail-field-row">
                                        <div class="field-group">
                                            <div class="field-label">
                                                Associated Customer
                                            </div>
                                            <div
                                                class="field-value link-value"
                                                onclick={handleCustomerClick}
                                            >
                                                {_detail.customer}
                                            </div>
                                        </div>
                                        <div class="field-group">
                                            <div class="field-label">
                                                Description
                                            </div>
                                            <div class="field-value">
                                                {_detail.description}
                                            </div>
                                        </div>
                                    </div>

                                    <div class="detail-field-row">
                                        <div class="field-group">
                                            <div class="field-label">
                                                Org Component
                                            </div>
                                            <div class="field-value">
                                                {_detail.orgComponent}
                                            </div>
                                        </div>
                                        <div class="field-group">
                                            <!-- Empty field for alignment -->
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="recurring-assessment-section">
                                <div class="checkbox-group">
                                    <input
                                        type="checkbox"
                                        id="recurringCheckbox"
                                        class="checkbox-input"
                                        checked={isRecurringAssessment}
                                        onchange={handleRecurringCheckboxChange}
                                    />
                                    <label
                                        for="recurringCheckbox"
                                        class="checkbox-label"
                                        >Create Recurring Assessments?</label
                                    >
                                </div>
                            </div>

                            <!-- Additional Information Section -->
                            <div class="information-section">
                                <div
                                    class="section-header"
                                    onclick={toggleAdditionalSection}
                                >
                                    <div class="section-toggle">
                                        <template
                                            if:true={isAdditionalExpanded}
                                        >
                                            <svg
                                                class="toggle-icon"
                                                viewBox="0 0 24 24"
                                            >
                                                <path
                                                    d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"
                                                ></path>
                                            </svg>
                                        </template>
                                        <template
                                            if:false={isAdditionalExpanded}
                                        >
                                            <svg
                                                class="toggle-icon"
                                                viewBox="0 0 24 24"
                                            >
                                                <path
                                                    d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"
                                                ></path>
                                            </svg>
                                        </template>
                                    </div>
                                    <h2 class="section-title">
                                        Additional Information
                                    </h2>
                                </div>

                                <div class={additionalContentClass}>
                                    <div class="detail-section">
                                        <div class="detail-fields">
                                            <div class="detail-field">
                                                <div class="field-label">
                                                    Created By
                                                </div>
                                                <div class="field-value">
                                                    {_detail.createdBy}
                                                </div>
                                            </div>
                                            <div class="detail-field">
                                                <div class="field-label">
                                                    Creation Date
                                                </div>
                                                <div class="field-value">
                                                    {_detail.formattedCreatedDate}
                                                </div>
                                            </div>
                                            <div class="detail-field">
                                                <div class="field-label">
                                                    Last Modified By
                                                </div>
                                                <div class="field-value">
                                                    {_detail.lastModifiedBy}
                                                </div>
                                            </div>
                                            <div class="detail-field">
                                                <div class="field-label">
                                                    Last Modified Date
                                                </div>
                                                <div class="field-value">
                                                    {_detail.formattedLastModifiedDate}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </template>

                    <!-- Questions Tab Content -->
                    <template if:true={isQuestionsTabActive}>
                        <div class="questions-tab-content">
                            <div class="no-questions">
                                <h3>
                                    No questions available for this checklist.
                                </h3>
                                <p>
                                    Questions will appear here when they are
                                    added to the checklist.
                                </p>
                            </div>
                        </div>
                    </template>

                    <!-- Files Tab Content -->
                    <template if:true={isFilesTabActive}>
                        <div class="questions-tab-content">
                            <div class="no-questions">
                                <h3>No files available for this checklist.</h3>
                                <p>
                                    Files will appear here when they are added
                                    to the checklist.
                                </p>
                            </div>
                        </div>
                    </template>

                    <!-- Preview Tab Content -->
                    <template if:true={isPreviewTabActive}>
                        <div class="preview-tab-content">
                            <div class="no-preview">
                                <h3>Preview not available.</h3>
                                <p>
                                    This is a preview of how your checklist will
                                    appear when filled out.
                                </p>
                            </div>
                        </div>
                    </template>
                </template>
            </div>
        </div>
    </div>
</template>
