<template>
    <div class="assign-section">
        <div class="section-header">
            <h2 class="section-title">Assign</h2>
        </div>

        <!-- Assessment Scope Selection -->
        <div class="scope-container">
            <div class="scope-selection">
                <label for="scope-select">Assessment Scope</label>
                <div class="select-wrapper">
                    <select
                        id="scope-select"
                        class="custom-select"
                        onchange={handleScopeChange}
                        placeholder="Select scope"
                    >
                        <!-- <option value="">Select scope</option> -->
                        <option value="All Suppliers">Supplier</option>
                        <option value="Customer">Customer</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Dynamic Item Selection Based on Scope -->
        <div if:true={showItemSelection} class="item-selection-container">
            <div class="selection-header">
                <h3 class="selection-title">Select {selectedScope}</h3>
                <span class="selected-count"
                    >{selectedItems.length} selected</span
                >
            </div>
            <div class="multi-select-container">
                <div class="search-box">
                    <input
                        type="text"
                        placeholder="Search..."
                        onkeyup={handleSearch}
                        class="search-input"
                    />
                </div>
                <div class="items-list">
                    <template
                        for:each={availableItems}
                        for:item="item"
                        for:index="index"
                    >
                        <div key={item.id} class="select-item">
                            <div class="custom-checkbox">
                                <input
                                    type="checkbox"
                                    id={item.id}
                                    name={item.id}
                                    checked={item.selected}
                                    onchange={handleItemSelection}
                                    data-id={item.id}
                                />
                                <label for={item.id}></label>
                            </div>
                            <span class="item-name">{item.name}</span>
                        </div>
                    </template>
                </div>
            </div>
            <div class="action-buttons">
                <button class="btn btn-cancel" onclick={handleCancel}>
                    Cancel
                </button>
                <button class="btn btn-save" onclick={handleSave}>Save</button>
            </div>
        </div>

        <!-- Suppliers Data Table -->
        <div class="modern-table-container">
            <div class="table-header">
                <div class="table-title">Suppliers Data Table</div>
                <div class="table-actions">
                    <span class="table-count">Total {suppliersCount}</span>
                </div>
            </div>

            <div class="responsive-table-wrapper">
                <table class="modern-table">
                    <thead>
                        <tr>
                            <th class="checkbox-column">
                                <div class="custom-checkbox">
                                    <input type="checkbox" id="select-all" />
                                    <label for="select-all"></label>
                                </div>
                            </th>
                            <th class="sortable-column" onclick={sortByName}>
                                <div class="column-header">
                                    Name
                                    <span class="sort-icon"></span>
                                </div>
                            </th>
                            <th class="sortable-column" onclick={sortByAddress}>
                                <div class="column-header">
                                    Corporate Address
                                    <span class="sort-icon"></span>
                                </div>
                            </th>
                            <th class="sortable-column" onclick={sortByDate}>
                                <div class="column-header">
                                    Date Added
                                    <span class="sort-icon"></span>
                                </div>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <template
                            for:each={suppliers}
                            for:item="supplier"
                            for:index="index"
                        >
                            <tr key={supplier.id} class="table-row">
                                <td>
                                    <div class="custom-checkbox">
                                        <input
                                            type="checkbox"
                                            id={supplier.id}
                                            name={supplier.id}
                                        />
                                        <label for={supplier.id}></label>
                                    </div>
                                </td>
                                <td class="name-column">
                                    <span class="supplier-name"
                                        >{supplier.name}</span
                                    >
                                </td>
                                <td>
                                    <span class="supplier-address"
                                        >{supplier.address}</span
                                    >
                                </td>
                                <td>
                                    <span class="date-added"
                                        >{supplier.dateAdded}</span
                                    >
                                </td>
                            </tr>
                        </template>
                    </tbody>
                </table>
            </div>

            <!-- Pagination Controls -->
            <div class="pagination-container">
                <div class="pagination-info">
                    <button class="page-first" aria-label="First Page">
                        «
                    </button>
                    <button
                        class="page-prev"
                        disabled
                        aria-label="Previous Page"
                    >
                        ‹
                    </button>
                    <div class="page-indicator">
                        <span class="current-page">1</span>
                        <div class="page-selector">
                            <input type="number" value="1" min="1" max="10" />
                            <span>▾</span>
                        </div>
                    </div>
                    <button class="page-next" aria-label="Next Page">›</button>
                    <button class="page-last" aria-label="Last Page">»</button>
                </div>
            </div>
        </div>
    </div>
</template>
