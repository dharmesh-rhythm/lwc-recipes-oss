<template>
    <div class="email-section">
        <div class="email-card">
            <div class="email-header">
                <span class="email-title">Email Communication</span>
            </div>
            <div class="email-underline"></div>
            <div class="email-row">
                <span class="email-icon">
                    <svg
                        class="slds-icon slds-icon_small"
                        aria-hidden="true"
                        style="width: 22px; height: 22px; fill: #f76b1c"
                    >
                        <use
                            xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#email"
                        ></use>
                    </svg>
                </span>
                <span class="email-label">Emails ({emailCount})</span>
                <button
                    class="email-refresh-btn"
                    title="Refresh"
                    onclick={handleRefresh}
                >
                    <svg
                        class="slds-icon slds-icon_small"
                        aria-hidden="true"
                        style="width: 20px; height: 20px"
                    >
                        <use
                            xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#refresh"
                        ></use>
                    </svg>
                </button>
            </div>
            <template if:true={emails.length}>
                <div class="email-list">
                    <ul class="slds-timeline">
                        <template for:each={emails} for:item="email">
                            <li key={email.id} class="email-list-item">
                                <div class="slds-timeline__item_email">
                                    <div class="slds-media">
                                        <div class="slds-media__figure">
                                            <div
                                                class="slds-icon_container slds-icon-standard-email"
                                                title="Email"
                                            >
                                                <!-- <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                                    <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#email"></use>
                                                </svg> -->
                                                <span
                                                    class="slds-assistive-text"
                                                    >Email</span
                                                >
                                            </div>
                                        </div>
                                        <div class="slds-media__body">
                                            <div
                                                class="slds-grid slds-grid_align-spread slds-timeline__trigger"
                                            >
                                                <div
                                                    class="slds-grid slds-grid_vertical-align-start"
                                                >
                                                    <div>
                                                        <span
                                                            class="slds-badge slds-badge_lightest slds-m-right_small"
                                                            >{email.direction}</span
                                                        >
                                                        <h3
                                                            class="slds-truncate"
                                                            title={email.subject}
                                                        >
                                                            <a
                                                                href="javascript:void(0);"
                                                                >{email.subject}</a
                                                            >
                                                        </h3>
                                                        <p
                                                            class="slds-truncate"
                                                            title={email.to}
                                                        >
                                                            <span
                                                                class="slds-text-title"
                                                                >To:</span
                                                            >
                                                            <span
                                                                class="slds-text-body_regular"
                                                                >{email.to}</span
                                                            >
                                                        </p>
                                                    </div>
                                                </div>
                                                <div
                                                    class="slds-timeline__actions slds-timeline__actions_inline"
                                                >
                                                    <p
                                                        class="slds-timeline__date"
                                                    >
                                                        {email.date}
                                                    </p>
                                                    <span
                                                        class="slds-badge slds-m-left_small"
                                                        title={email.status}
                                                        >{email.status}</span
                                                    >
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </template>
                    </ul>
                </div>
            </template>
        </div>
    </div>
</template>
